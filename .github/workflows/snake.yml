name: Simple Snake Generator

on:
  workflow_dispatch:
  schedule:
    - cron: "30 0 * * *"

jobs:
  generate:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      # Просто скачиваем SVG через API
      - name: Download snake
        run: |
          curl -L "https://github-contributions-api.deno.dev/djedra.svg" > snake.svg
          echo "Файл создан!"
          ls -la snake.svg

      # Коммитим напрямую (без сложных actions)
      - name: Push to repository
        run: |
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          git config --global user.name "github-actions[bot]"
          git add snake.svg
          git commit -m "Update snake $(date +'%Y-%m-%d')" || echo "No changes"
          git push
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
