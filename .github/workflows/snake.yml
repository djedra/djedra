name: Animated Snake via API

on: [workflow_dispatch]

jobs:
  generate:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      # Используем API который создаёт АНИМИРОВАННУЮ змейку
      - name: Get animated snake
        run: |
          echo "Downloading ANIMATED snake..."
          # Этот API создаёт анимированную SVG змейку
          curl -s "https://github-contributions-api.deno.dev/djedra.svg?animated=true" > snake.svg
          
          # Проверяем что файл анимированный
          if grep -q "<animate" snake.svg; then
            echo "✅ Animated snake created!"
            echo "File contains animation tags"
          else
            echo "⚠️ Warning: No animation found in SVG"
          fi
      
      - name: Commit
        run: |
          git config user.email "actions@github.com"
          git config user.name "GitHub Actions"
          git add snake.svg
          git commit -m "Add animated snake" || echo "No changes"
          git push
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
